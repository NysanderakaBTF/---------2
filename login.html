<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/html">


<head>
    <meta charset="UTF-8">
    <meta name="author" content="Григорий Резников">
    <meta name="description" content="Сайт Могилевской Шоколадной Фабрики им Григория">
    <title>Шоколадная Фабрика Могилева</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@1,300&display=swap" rel="stylesheet">
</head>

<body>
    
    <canvas id="can"></canvas>
    <main>
        
        <div class="box">
            

            <div class="fig square1" style="--i:0;"></div>
          
            <div class="fig square3" style="--i:2;"></div>
            <div class="fig square4" style="--i:3;"></div>
            <div class="fig square5" style="--i:4;"></div>
            <div class="fig square6" style="--i:5;"></div>
    
            <div class="container">
                <div class="form">
                    <h2>Логин</h2>
                    <form action="">
                        <div class="inputBx">
                            <input id="mail" type="text" required="required">
                            <span>Почта</span>
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="inputBx password">
                            <input id="password-input" type="password" name="password" required="required">
                            <span>Пароль</span>
                            <i class="fas fa-key"></i>
                        </div>
                        <div id="t1" style="color: white;"></div>
                        
                        <div id="capcha" class="inputBx" style="border-radius: 10px; width: 80%; height: 30px; background-color: cadetblue;">
                        
                        </div>
                        <div class="inputBx">
                            <input type="text" id="capc" placeholder="your capcha">
                        </div>
                        <div id="checkcap" class="checkcap" style=" margin-bottom: 10px; text-align: center; border-radius: 15px; width: 50%; height: 30px; background-color: cadetblue;">
                            Gen capcha
                        </div>

                        <div class="inputBx">
                            <input id="su" type="submit" value="Войти" disabled>
                        </div>
                    </form>
                    <p>Забыли пароль? <a href="#">Перейти</a></p>
                    <p>Ещё нет аккаунта <a href="#" id="s">Зарегистрироваться</a></p>
                    <p><a href="/index.html">Назад</a></p>
                </div>

                <div class="inputBx">
                    <input type="button" id="acc_func" value="Аккумулятор" style="color: white;">
                    <div id="result_acc"></div>
                </div>
            </div>
    
        </div>
        <div id="li" class="like">
        </div>

            
    </main>
<footer>
    <div class="social_buttons">
        <a class="social_button" href="https://vk.com"><img src="/images/icons8-facebook.svg"></a>
        <a class="social_button" href="https://github.com"><img src="/images/icons8-github.svg"></a>
        <a class="social_button" href="https://pinterest.com"><img src="/images/icons8-pinterest.svg"></a>
        <a class="social_button" href="https://twitter.com"><img src="/images/icons8-twitter.svg"></a>
    </div>
</footer>

</body>

</html>

<style>
    canvas{
        width: 100%;
        height: 100%;
        position: fixed;
        z-index: 0;
        margin: 0;
        
    }
    .like{
        z-index: 1000;
        width: 50px;
        height: 50px;
        background-color: grey;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.5s;
    }
    
</style>

<script>
    var correct = false;
    var trycount = 0;
    document.getElementById("s").addEventListener("click", function(f){
        let ma = document.getElementById("mail").value;
        let pass = document.getElementById("password-input").value;
        let res;
        let ans;
        if(ma =="" && pass == "" ){
            ans = prompt("Желаете пройти регистрацию на сайте?");
            if(ans!=null){
                document.getElementById("t1").innerText="Nice!";
            }else{
                document.getElementById("t1").innerText="Попробуй ещё раз";  
            }
        }
    }
    );
    var a,b,c;
    document.getElementById("checkcap").addEventListener("click", function(e){
        
        if(trycount == 0){
            document.getElementById("capcha").innerText=random(10);
            document.getElementById("checkcap").innerText="Check capcha";
            trycount++;
        }
        else{
            let ans = document.getElementById("capc").value.toString();
            if(ans.isEmpty || ans==""){
                alert("Solve capcha");
            }else{
                if(trycount==1){
                    if(ans == document.getElementById("capcha").innerText){
                        correct = true;
                        alert("Nice");
                        document.getElementById("checkcap").setAttribute("disabled", true);
                        document.getElementById("su").removeAttribute("disabled");
                        document.getElementById("capcha").innerText=" ";
                        trycount = 0;
                    }else{
                        alert("Incorrect");
                        a = Math.ceil(Math.random()*(100-10)+10); b=Math.ceil(Math.random()*(50-1) +1);
                        c = a+b;
                        document.getElementById("capcha").innerText=a.toString() + " + " + b.toString();
                        trycount++;
                    }
                }else if(trycount>1){
                    c=a+b;
                    console.log(c);
                    if(ans == c){
                        correct = true;
                        alert("Nice");
                        document.getElementById("checkcap").setAttribute("disabled", true);
                        document.getElementById("su").removeAttribute("disabled");
                        document.getElementById("capcha").innerText=" ";
                        trycount = 0;
                    }else{
                        alert("Incorrect");
                        a = Math.ceil(Math.random()*(100-10)+10); b=Math.ceil(Math.random()*(50-1) +1);
                        c = a+b;
                        document.getElementById("capcha").innerText=a.toString() + " + " + b.toString();
                        c=a+b;
                        trycount++;
                    }
                }
                
            }
        }
    }
    
    );

    function random(len){
        let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let str = '';
        for (let i = 0; i < len; i++) {
            str += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return str;
    };
   
    var coutn = 0;
    
    var can = document.getElementById("can");
    var c = can.getContext("2d");
    can.width = window.innerWidth;
    can.height = window.innerHeight;
    c.moveTo(0,0);

    document.getElementById("li").addEventListener("click", function  ff(f){
        
        this.innerText=coutn++;
        
        if(f.target.style.backgroundColor == "red"){
            f.target.style.backgroundColor = "grey";
        }else{
            f.target.style.backgroundColor = "red";
        }
    }
    );
    var prx = 0;
    var pry = 0;
    function f(ev){
        if(document.getElementById("li").style.backgroundColor=="red"){
            if(prx != 0 && pry != 0){
            c.moveTo(prx,pry);
            c.lineTo(ev.clientX,ev.clientY);
            c.stroke();
            }
            console.log(prx, pry);
            prx=ev.clientX;
            pry=ev.clientY;
        }
    }
    document.getElementById("can").addEventListener('mousemove', f, false);
    document.getElementById("can").addEventListener("mouseenter", f, false);
    document.getElementById("can").addEventListener("mouseleave", f, false);

    function Accumulator(startingValue) {
        this.value = startingValue

        this.read = function () {
            let val = prompt();
            this.value += parseInt(val);
        }
    }

    let acc = new Accumulator(0);

    document.getElementById("acc_func").addEventListener("click", function (){
       acc.read();
        document.getElementById("result_acc").innerText = acc.value;

    });
</script>